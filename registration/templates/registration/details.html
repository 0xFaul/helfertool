{% extends "base.html" %}

{% block content %}
    <h1>Helfer f√ºr {{ event.name }}</h1>

    {% for job in event.job_set.all %}
        <h2>{{ job.name }}</h2>
        {% regroup  job.shift_set.all|dictsort:"begin" by begin|date:"d.m.Y" as shifts_by_day %}
        {% for day in shifts_by_day %}
            <h3>{{ day.grouper }}</h3>
            {% for shift in day.list|dictsort:"begin" %}
                <h4>{{ shift.begin | date:"H:i" }} - {{ shift.end | date:"H:i" }}
                    ({{ shift.helper_set.count }} von {{ shift.number}})</h4>
                <table class="helpers">
                    <tr>
                        <th>Vorname</th>
                        <th>Nachname</th>
                        <th>E-Mail</th>
                        <th>Handy</th>
                        <th>T-Shirt</th>
                        <th>Vegetarier</th>
                        <th>Kommentar</th>
                        <th>Anmeldezeit</th>
                    </tr>
                {% for helper in shift.helper_set.all|dictsort:"timestamp" %}
                    <tr>
                        <td>{{ helper.prename }}</td>
                        <td>{{ helper.surname }}</td>
                        <td>{{ helper.email }}</td>
                        <td>{{ helper.phone }}</td>
                        <td>{{ helper.get_shirt_display }}</td>
                        <td>{{ helper.vegetarian | yesno }}</td>
                        <td>{{ helper.comment }}</td>
                        <td>{{ helper.timestamp }}</td>
                    </tr>
                {% endfor %}
                </table>
            {% endfor %}
        {% endfor %}
    {% endfor %}
{% endblock %}
